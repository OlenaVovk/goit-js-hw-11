!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var s=i("bpxeT"),l=i("2TvXO"),r=i("iU1Pc"),a={};a=function(){"use strict";var e,t,n,o,i={};return e=i,t="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),n=function(e){e.touches.length>1||e.preventDefault&&e.preventDefault()},o=function(){function e(e,o){var i,s,l=this;this.classNames={container:"only-scroll-container",lock:"only-scroll--is-locked"},this.updateDirection=function(){l.lastPosition=l.scrollY,l.scrollY=Math.abs(l.scrollContainer.scrollTop),l.direction!==l.lastDirection&&(l.scrollContainer.dataset.scrollDirection=1===l.direction?"down":"up",l.lastDirection=l.direction)},this.sync=function(){l.syncPos(),l.rafID=null},this.scrollTo=function(e){l.targetY=e,l.tick()},this.setValue=function(e){l.scrollContainer.scrollTop=e,l.sync()},this.lock=function(){l.isLocked||(t?l.disableIosScroll():l.scrollContainer.style.overflow="hidden",l.scrollContainer.classList.add(l.classNames.lock),l.eventContainer.removeEventListener("wheel",l.onWheel),l.isLocked=!0,l.sync())},this.unlock=function(){l.isLocked&&(t?l.enableIosScroll():l.scrollContainer.style.overflow="auto",l.scrollContainer.classList.remove(l.classNames.lock),l.eventContainer.addEventListener("wheel",l.onWheel,{passive:!1}),l.isLocked=!1,l.tick())},this.addScrollListener=function(e){l.eventContainer.addEventListener("scroll",e),l.listeners.add(e)},this.removeScrollListener=function(e){l.eventContainer.removeEventListener("scroll",e),l.listeners.delete(e)},this.destroy=function(){var e;l.syncTo&&clearTimeout(l.syncTo),l.scrollContainer.style.removeProperty("overflow"),(e=l.scrollContainer.classList).remove.apply(e,Object.values(l.classNames)),l.scrollContainer.removeAttribute("data-scroll-direction"),(l.scrollContainer===document.documentElement?window:l.scrollContainer).removeEventListener("scroll",l.onScroll),l.eventContainer.removeEventListener("wheel",l.onWheel),Array.from(l.listeners.values()).forEach((function(e){return l.removeScrollListener(e)}))},this.findElementBySelector=function(e){var t;return e!==window&&e!==document.scrollingElement?"string"==typeof e?document.querySelector(e):e:null!==(t=document.scrollingElement)&&void 0!==t?t:document.body},this.init=function(){l.scrollContainer.style.overflow="auto",l.scrollContainer.style.scrollBehavior="auto",l.scrollContainer.dataset.scrollDirection="up",l.scrollContainer.classList.add(l.classNames.container),l.initEvents(),l.findInitialAnchor()},this.initEvents=function(){(l.scrollContainer===document.documentElement?window:l.scrollContainer).addEventListener("scroll",l.onScroll,{passive:!0}),l.eventContainer.addEventListener("wheel",l.onWheel,{passive:!1})},this.findInitialAnchor=function(){if(window.location.hash){var e=document.querySelector(window.location.hash);e&&requestAnimationFrame((function(){return l.setValue(e.offsetTop)}))}},this.onScroll=function(){if(!l.isLocked&&!l.isDisable){if(l.updateDirection(),window.location.hash!==l.lastHash)return l.lastHash=window.location.hash,void l.syncPos();l.checkSyncTo()}},this.onWheel=function(e){e.preventDefault(),l.isLocked||(l.manageParentScrollbars(e.target),l.isDisable||(l.targetY+=l.wheelCalculate(e).pixelY,l.targetY=Math.min(l.targetY,l.scrollContainer.scrollHeight-l.scrollContainer.clientHeight),l.targetY=Math.max(l.targetY,0),null===l.rafID&&l.tick()))},this.syncPos=function(){l.easedY=l.scrollContainer.scrollTop,l.targetY=l.scrollContainer.scrollTop,l.lastY=l.scrollContainer.scrollTop,l.scrollY=l.scrollContainer.scrollTop},this.checkSyncTo=function(){l.syncTo&&clearTimeout(l.syncTo),l.syncTo=setTimeout(l.sync,100)},this.wheelCalculate=function(e){var t=e.deltaY,n=e.deltaX;if(e.deltaMode){var o=1==e.deltaMode?40:800;n*=o,t*=o}return{spinX:n<1?-1:1,spinY:t<1?-1:1,pixelX:n,pixelY:t}},this.manageParentScrollbars=function(e){var t;(null===(t=e.closest(".".concat(l.classNames.container)))||void 0===t?void 0:t.isSameNode(l.scrollContainer))?l.isDisable&&l.enable():!l.isDisable&&l.disable()},this.disable=function(){l.isDisable=!0,l.sync()},this.enable=function(){l.isDisable=!1,l.sync()},this.disableIosScroll=function(){requestAnimationFrame((function(){if(void 0===l.previousBodyPosition){l.previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window.scrollY,t=window.scrollX,n=window.innerHeight;document.body.style.position="fixed",document.body.style.top="".concat(-e,"px"),document.body.style.left="".concat(-t,"px"),setTimeout((function(){return window.requestAnimationFrame((function(){var t=n-window.innerHeight;t&&e>=n&&(document.body.style.top=-(e+t)+"px")}))}),300)}})),l.scrollContainer.ontouchstart=function(e){1===e.targetTouches.length&&(l.initialClientY=e.targetTouches[0].clientY)},l.scrollContainer.ontouchmove=function(e){if(1===e.targetTouches.length){var t=e.targetTouches[0].clientY-l.initialClientY;return l.scrollContainer&&0===l.scrollContainer.scrollTop&&t>0&&n(e),l.scrollContainer.scrollHeight-l.scrollContainer.scrollTop<=l.scrollContainer.clientHeight&&t<0&&n(e),void e.stopPropagation()}},l.documentListenerAdded||(document.addEventListener("touchmove",n,{passive:!1}),l.documentListenerAdded=!0)},this.enableIosScroll=function(){if(l.scrollContainer.ontouchstart=null,l.scrollContainer.ontouchmove=null,l.documentListenerAdded&&(document.removeEventListener("touchmove",n),l.documentListenerAdded=!1),void 0!==l.previousBodyPosition){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=l.previousBodyPosition.position,document.body.style.top=l.previousBodyPosition.top,document.body.style.left=l.previousBodyPosition.left,window.scrollTo(t,e),l.previousBodyPosition=void 0}},this.tick=function(){l.easedY=+((1-l.damping)*l.easedY+l.damping*l.targetY).toFixed(2),l.scrollContainer.scrollTop=Math.round(l.easedY),l.lastY!==l.easedY?(l.lastY=l.easedY,l.velocity=parseInt((l.targetY-l.easedY).toString()),l.progress=Math.round(l.easedY/(l.scrollContainer.scrollHeight-l.scrollContainer.clientHeight)*100),l.rafID=requestAnimationFrame(l.tick)):l.rafID=null};var r=this.findElementBySelector(e);if(!r)throw new Error("scrollElement does not exist");this.scrollContainer=r;var a=null!==(i=this.findElementBySelector(null==o?void 0:o.eventContainer))&&void 0!==i?i:this.scrollContainer;this.eventContainer=a===document.scrollingElement?window:a,this.scrollY=0,this.easedY=0,this.targetY=0,this.lastY=0,this.velocity=0,this.progress=0,this.lastPosition=0,this.lastDirection=null,this.isLocked=!1,this.rafID=null,this.damping=.1*(null!==(s=null==o?void 0:o.damping)&&void 0!==s?s:1),this.lastHash=window.location.hash,this.listeners=new Set,this.isDisable=!1,this.initialClientY=-1,this.documentListenerAdded=!1,this.init()}return Object.defineProperty(e.prototype,"direction",{get:function(){return this.scrollY>this.lastPosition?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.scrollY},enumerable:!1,configurable:!0}),e}(),e.default=o,i.default}();var c=i("lbRHt");function d(e){return e.map((function(e){var t=e.webformatURL,n=e.largeImageURL,o=e.tags,i=e.likes,s=e.views,l=e.comments,r=e.downloads;return'<div class="photo-card">\n    <a class="gallery__item" href="'.concat(n,'"><img class="img" src="').concat(t,'" data-source="').concat(n,'" alt="').concat(o,'" loading="lazy"/></a>\n        <div class="info">\n          <p class="info-item"><span><b>Likes</b></span><span>').concat(i,'</span></p>\n          <p class="info-item"><span><b>Views</b></span><span>').concat(s,'</span></p>\n          <p class="info-item"><span><b>Comments</b></span><span>').concat(l,'</span></p>\n          <p class="info-item"><span><b>Downloads</b></span><span>').concat(r,"</span></p>\n        </div>\n    </div>")})).join("")}function u(e,t){t.insertAdjacentHTML("beforeend",d(e))}function h(e,t){t.innerHTML=d(e)}function f(e){(e.preventDefault(),"IMG"===e.target.nodeName)&&(document.querySelectorAll("img").forEach((function(){lightbox.classList.add("active");var t=document.createElement("img");for(t.src=e.target.dataset.source;lightbox.firstChild;)lightbox.removeChild(lightbox.firstChild);lightbox.append(t)})),document.addEventListener("keydown",v))}function v(e){"Escape"===e.code&&lightbox.classList.remove("active")}var m,p=1,y="",g=document.querySelector("form"),w=document.querySelector(".gallery"),b=document.querySelector(".load-more"),C=document.querySelector(".message");function L(e){return T.apply(this,arguments)}function T(){return(T=e(s)(e(l).mark((function t(n){var o;return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.fetchAPI(n,p);case 3:if(o=t.sent,m=Math.ceil(o.totalHits/40),o.hits.length){t.next=11;break}return e(r).Notify.failure("Sorry, there are no images matching your search query. Please try again."),w.innerHTML="",b.classList.add("visually-hidden"),C.classList.add("visually-hidden"),t.abrupt("return");case 11:1===p?(e(r).Notify.success("Hooray! We found ".concat(o.totalHits," images.")),h(o.hits,w),w.addEventListener("click",f),b.classList.remove("visually-hidden"),C.classList.add("visually-hidden")):u(o.hits,w),p===m&&(b.classList.add("visually-hidden"),C.classList.remove("visually-hidden")),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("Oй помилочка: ",t.t0.message),e(r).Notify.failure("Упсс щось пішло не так... Спробуйте пізніше!");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}g.addEventListener("submit",(function(t){if(t.preventDefault(),p=1,!(y=t.currentTarget.elements.searchQuery.value))return w.innerHTML="",b.classList.add("visually-hidden"),e(r).Notify.failure("Введіть будь ласка текст для пошуку!");L(y),t.currentTarget.reset()})),b.addEventListener("click",(function(){(p+=1)===m&&(b.classList.add("visually-hidden"),C.classList.remove("visually-hidden"));L(y)}));var Y=document.createElement("div");Y.id="lightbox",document.body.appendChild(Y),Y.addEventListener("click",(function(e){"IMG"===e.target.nodeName&&(lightbox.classList.remove("active"),document.removeEventListener("keydown",v))}));new(e(a))(document.scrollingElement,{damping:.8,eventContainer:window})}();
//# sourceMappingURL=01-task.b0aa1d50.js.map
