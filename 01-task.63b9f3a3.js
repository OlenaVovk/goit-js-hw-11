function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var s,l,r,a,c,d=i("eWCmQ"),u={};s=c={},l="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),r=function(e){e.touches.length>1||e.preventDefault&&e.preventDefault()},a=function(){function e(e,t){var n,o,i=this;this.classNames={container:"only-scroll-container",lock:"only-scroll--is-locked"},this.updateDirection=function(){i.lastPosition=i.scrollY,i.scrollY=Math.abs(i.scrollContainer.scrollTop),i.direction!==i.lastDirection&&(i.scrollContainer.dataset.scrollDirection=1===i.direction?"down":"up",i.lastDirection=i.direction)},this.sync=function(){i.syncPos(),i.rafID=null},this.scrollTo=function(e){i.targetY=e,i.tick()},this.setValue=function(e){i.scrollContainer.scrollTop=e,i.sync()},this.lock=function(){i.isLocked||(l?i.disableIosScroll():i.scrollContainer.style.overflow="hidden",i.scrollContainer.classList.add(i.classNames.lock),i.eventContainer.removeEventListener("wheel",i.onWheel),i.isLocked=!0,i.sync())},this.unlock=function(){i.isLocked&&(l?i.enableIosScroll():i.scrollContainer.style.overflow="auto",i.scrollContainer.classList.remove(i.classNames.lock),i.eventContainer.addEventListener("wheel",i.onWheel,{passive:!1}),i.isLocked=!1,i.tick())},this.addScrollListener=function(e){i.eventContainer.addEventListener("scroll",e),i.listeners.add(e)},this.removeScrollListener=function(e){i.eventContainer.removeEventListener("scroll",e),i.listeners.delete(e)},this.destroy=function(){var e;i.syncTo&&clearTimeout(i.syncTo),i.scrollContainer.style.removeProperty("overflow"),(e=i.scrollContainer.classList).remove.apply(e,Object.values(i.classNames)),i.scrollContainer.removeAttribute("data-scroll-direction"),(i.scrollContainer===document.documentElement?window:i.scrollContainer).removeEventListener("scroll",i.onScroll),i.eventContainer.removeEventListener("wheel",i.onWheel),Array.from(i.listeners.values()).forEach((function(e){return i.removeScrollListener(e)}))},this.findElementBySelector=function(e){var t;return e!==window&&e!==document.scrollingElement?"string"==typeof e?document.querySelector(e):e:null!==(t=document.scrollingElement)&&void 0!==t?t:document.body},this.init=function(){i.scrollContainer.style.overflow="auto",i.scrollContainer.style.scrollBehavior="auto",i.scrollContainer.dataset.scrollDirection="up",i.scrollContainer.classList.add(i.classNames.container),i.initEvents(),i.findInitialAnchor()},this.initEvents=function(){(i.scrollContainer===document.documentElement?window:i.scrollContainer).addEventListener("scroll",i.onScroll,{passive:!0}),i.eventContainer.addEventListener("wheel",i.onWheel,{passive:!1})},this.findInitialAnchor=function(){if(window.location.hash){var e=document.querySelector(window.location.hash);e&&requestAnimationFrame((function(){return i.setValue(e.offsetTop)}))}},this.onScroll=function(){if(!i.isLocked&&!i.isDisable){if(i.updateDirection(),window.location.hash!==i.lastHash)return i.lastHash=window.location.hash,void i.syncPos();i.checkSyncTo()}},this.onWheel=function(e){e.preventDefault(),i.isLocked||(i.manageParentScrollbars(e.target),i.isDisable||(i.targetY+=i.wheelCalculate(e).pixelY,i.targetY=Math.min(i.targetY,i.scrollContainer.scrollHeight-i.scrollContainer.clientHeight),i.targetY=Math.max(i.targetY,0),null===i.rafID&&i.tick()))},this.syncPos=function(){i.easedY=i.scrollContainer.scrollTop,i.targetY=i.scrollContainer.scrollTop,i.lastY=i.scrollContainer.scrollTop,i.scrollY=i.scrollContainer.scrollTop},this.checkSyncTo=function(){i.syncTo&&clearTimeout(i.syncTo),i.syncTo=setTimeout(i.sync,100)},this.wheelCalculate=function(e){var t=e.deltaY,n=e.deltaX;if(e.deltaMode){var o=1==e.deltaMode?40:800;n*=o,t*=o}return{spinX:n<1?-1:1,spinY:t<1?-1:1,pixelX:n,pixelY:t}},this.manageParentScrollbars=function(e){var t;(null===(t=e.closest(".".concat(i.classNames.container)))||void 0===t?void 0:t.isSameNode(i.scrollContainer))?i.isDisable&&i.enable():!i.isDisable&&i.disable()},this.disable=function(){i.isDisable=!0,i.sync()},this.enable=function(){i.isDisable=!1,i.sync()},this.disableIosScroll=function(){requestAnimationFrame((function(){if(void 0===i.previousBodyPosition){i.previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window.scrollY,t=window.scrollX,n=window.innerHeight;document.body.style.position="fixed",document.body.style.top="".concat(-e,"px"),document.body.style.left="".concat(-t,"px"),setTimeout((function(){return window.requestAnimationFrame((function(){var t=n-window.innerHeight;t&&e>=n&&(document.body.style.top=-(e+t)+"px")}))}),300)}})),i.scrollContainer.ontouchstart=function(e){1===e.targetTouches.length&&(i.initialClientY=e.targetTouches[0].clientY)},i.scrollContainer.ontouchmove=function(e){if(1===e.targetTouches.length){var t=e.targetTouches[0].clientY-i.initialClientY;return i.scrollContainer&&0===i.scrollContainer.scrollTop&&t>0&&r(e),i.scrollContainer.scrollHeight-i.scrollContainer.scrollTop<=i.scrollContainer.clientHeight&&t<0&&r(e),void e.stopPropagation()}},i.documentListenerAdded||(document.addEventListener("touchmove",r,{passive:!1}),i.documentListenerAdded=!0)},this.enableIosScroll=function(){if(i.scrollContainer.ontouchstart=null,i.scrollContainer.ontouchmove=null,i.documentListenerAdded&&(document.removeEventListener("touchmove",r),i.documentListenerAdded=!1),void 0!==i.previousBodyPosition){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=i.previousBodyPosition.position,document.body.style.top=i.previousBodyPosition.top,document.body.style.left=i.previousBodyPosition.left,window.scrollTo(t,e),i.previousBodyPosition=void 0}},this.tick=function(){i.easedY=+((1-i.damping)*i.easedY+i.damping*i.targetY).toFixed(2),i.scrollContainer.scrollTop=Math.round(i.easedY),i.lastY!==i.easedY?(i.lastY=i.easedY,i.velocity=parseInt((i.targetY-i.easedY).toString()),i.progress=Math.round(i.easedY/(i.scrollContainer.scrollHeight-i.scrollContainer.clientHeight)*100),i.rafID=requestAnimationFrame(i.tick)):i.rafID=null};var s=this.findElementBySelector(e);if(!s)throw new Error("scrollElement does not exist");this.scrollContainer=s;var a=null!==(n=this.findElementBySelector(null==t?void 0:t.eventContainer))&&void 0!==n?n:this.scrollContainer;this.eventContainer=a===document.scrollingElement?window:a,this.scrollY=0,this.easedY=0,this.targetY=0,this.lastY=0,this.velocity=0,this.progress=0,this.lastPosition=0,this.lastDirection=null,this.isLocked=!1,this.rafID=null,this.damping=.1*(null!==(o=null==t?void 0:t.damping)&&void 0!==o?o:1),this.lastHash=window.location.hash,this.listeners=new Set,this.isDisable=!1,this.initialClientY=-1,this.documentListenerAdded=!1,this.init()}return Object.defineProperty(e.prototype,"direction",{get:function(){return this.scrollY>this.lastPosition?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.scrollY},enumerable:!1,configurable:!0}),e}(),s.default=a,u=c.default;var h=i("cqGDw");function m(e){return e.map((({webformatURL:e,largeImageURL:t,tags:n,likes:o,views:i,comments:s,downloads:l})=>`<div class="photo-card">\n    <a class="gallery__item" href="${t}"><img class="img" src="${e}" data-source="${t}" alt="${n}" loading="lazy"/></a>\n        <div class="info">\n          <p class="info-item"><span><b>Likes</b></span><span>${o}</span></p>\n          <p class="info-item"><span><b>Views</b></span><span>${i}</span></p>\n          <p class="info-item"><span><b>Comments</b></span><span>${s}</span></p>\n          <p class="info-item"><span><b>Downloads</b></span><span>${l}</span></p>\n        </div>\n    </div>`)).join("")}function f(e,t){t.insertAdjacentHTML("beforeend",m(e))}function v(e,t){t.innerHTML=m(e)}function p(e){if(e.preventDefault(),"IMG"!==e.target.nodeName)return;document.querySelectorAll("img").forEach((()=>{lightbox.classList.add("active");const t=document.createElement("img");for(t.src=e.target.dataset.source;lightbox.firstChild;)lightbox.removeChild(lightbox.firstChild);lightbox.append(t)})),document.addEventListener("keydown",y)}function y(e){"Escape"===e.code&&lightbox.classList.remove("active")}let g,w=1,b="";const C=document.querySelector("form"),L=document.querySelector(".gallery"),Y=document.querySelector(".load-more"),T=document.querySelector(".message");async function E(t){try{const n=await h.fetchAPI(t,w);if(g=Math.ceil(n.totalHits/40),!n.hits.length)return e(d).Notify.failure("Sorry, there are no images matching your search query. Please try again."),L.innerHTML="",Y.classList.add("visually-hidden"),void T.classList.add("visually-hidden");1===w?(e(d).Notify.success(`Hooray! We found ${n.totalHits} images.`),v(n.hits,L),L.addEventListener("click",p),Y.classList.remove("visually-hidden"),T.classList.add("visually-hidden")):f(n.hits,L),w===g&&(Y.classList.add("visually-hidden"),T.classList.remove("visually-hidden"))}catch(t){console.log("Oй помилочка: ",t.message),e(d).Notify.failure("Упсс щось пішло не так... Спробуйте пізніше!")}}C.addEventListener("submit",(function(t){if(t.preventDefault(),w=1,b=t.currentTarget.elements.searchQuery.value,!b)return L.innerHTML="",Y.classList.add("visually-hidden"),e(d).Notify.failure("Введіть будь ласка текст для пошуку!");E(b),t.currentTarget.reset()})),Y.addEventListener("click",(function(){w+=1,w===g&&(Y.classList.add("visually-hidden"),T.classList.remove("visually-hidden"));E(b)}));const D=document.createElement("div");D.id="lightbox",document.body.appendChild(D),D.addEventListener("click",(function(e){"IMG"===e.target.nodeName&&(lightbox.classList.remove("active"),document.removeEventListener("keydown",y))}));new(e(u))(document.scrollingElement,{damping:.8,eventContainer:window});
//# sourceMappingURL=01-task.63b9f3a3.js.map
