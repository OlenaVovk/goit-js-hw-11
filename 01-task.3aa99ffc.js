!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var l=i("bpxeT"),s=i("2TvXO"),r=i("iU1Pc"),a={};a=function(){"use strict";var e,t,n,o,i={};return e=i,t="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),n=function(e){e.touches.length>1||e.preventDefault&&e.preventDefault()},o=function(){function e(e,o){var i,l,s=this;this.classNames={container:"only-scroll-container",lock:"only-scroll--is-locked"},this.updateDirection=function(){s.lastPosition=s.scrollY,s.scrollY=Math.abs(s.scrollContainer.scrollTop),s.direction!==s.lastDirection&&(s.scrollContainer.dataset.scrollDirection=1===s.direction?"down":"up",s.lastDirection=s.direction)},this.sync=function(){s.syncPos(),s.rafID=null},this.scrollTo=function(e){s.targetY=e,s.tick()},this.setValue=function(e){s.scrollContainer.scrollTop=e,s.sync()},this.lock=function(){s.isLocked||(t?s.disableIosScroll():s.scrollContainer.style.overflow="hidden",s.scrollContainer.classList.add(s.classNames.lock),s.eventContainer.removeEventListener("wheel",s.onWheel),s.isLocked=!0,s.sync())},this.unlock=function(){s.isLocked&&(t?s.enableIosScroll():s.scrollContainer.style.overflow="auto",s.scrollContainer.classList.remove(s.classNames.lock),s.eventContainer.addEventListener("wheel",s.onWheel,{passive:!1}),s.isLocked=!1,s.tick())},this.addScrollListener=function(e){s.eventContainer.addEventListener("scroll",e),s.listeners.add(e)},this.removeScrollListener=function(e){s.eventContainer.removeEventListener("scroll",e),s.listeners.delete(e)},this.destroy=function(){var e;s.syncTo&&clearTimeout(s.syncTo),s.scrollContainer.style.removeProperty("overflow"),(e=s.scrollContainer.classList).remove.apply(e,Object.values(s.classNames)),s.scrollContainer.removeAttribute("data-scroll-direction"),(s.scrollContainer===document.documentElement?window:s.scrollContainer).removeEventListener("scroll",s.onScroll),s.eventContainer.removeEventListener("wheel",s.onWheel),Array.from(s.listeners.values()).forEach((function(e){return s.removeScrollListener(e)}))},this.findElementBySelector=function(e){var t;return e!==window&&e!==document.scrollingElement?"string"==typeof e?document.querySelector(e):e:null!==(t=document.scrollingElement)&&void 0!==t?t:document.body},this.init=function(){s.scrollContainer.style.overflow="auto",s.scrollContainer.style.scrollBehavior="auto",s.scrollContainer.dataset.scrollDirection="up",s.scrollContainer.classList.add(s.classNames.container),s.initEvents(),s.findInitialAnchor()},this.initEvents=function(){(s.scrollContainer===document.documentElement?window:s.scrollContainer).addEventListener("scroll",s.onScroll,{passive:!0}),s.eventContainer.addEventListener("wheel",s.onWheel,{passive:!1})},this.findInitialAnchor=function(){if(window.location.hash){var e=document.querySelector(window.location.hash);e&&requestAnimationFrame((function(){return s.setValue(e.offsetTop)}))}},this.onScroll=function(){if(!s.isLocked&&!s.isDisable){if(s.updateDirection(),window.location.hash!==s.lastHash)return s.lastHash=window.location.hash,void s.syncPos();s.checkSyncTo()}},this.onWheel=function(e){e.preventDefault(),s.isLocked||(s.manageParentScrollbars(e.target),s.isDisable||(s.targetY+=s.wheelCalculate(e).pixelY,s.targetY=Math.min(s.targetY,s.scrollContainer.scrollHeight-s.scrollContainer.clientHeight),s.targetY=Math.max(s.targetY,0),null===s.rafID&&s.tick()))},this.syncPos=function(){s.easedY=s.scrollContainer.scrollTop,s.targetY=s.scrollContainer.scrollTop,s.lastY=s.scrollContainer.scrollTop,s.scrollY=s.scrollContainer.scrollTop},this.checkSyncTo=function(){s.syncTo&&clearTimeout(s.syncTo),s.syncTo=setTimeout(s.sync,100)},this.wheelCalculate=function(e){var t=e.deltaY,n=e.deltaX;if(e.deltaMode){var o=1==e.deltaMode?40:800;n*=o,t*=o}return{spinX:n<1?-1:1,spinY:t<1?-1:1,pixelX:n,pixelY:t}},this.manageParentScrollbars=function(e){var t;(null===(t=e.closest(".".concat(s.classNames.container)))||void 0===t?void 0:t.isSameNode(s.scrollContainer))?s.isDisable&&s.enable():!s.isDisable&&s.disable()},this.disable=function(){s.isDisable=!0,s.sync()},this.enable=function(){s.isDisable=!1,s.sync()},this.disableIosScroll=function(){requestAnimationFrame((function(){if(void 0===s.previousBodyPosition){s.previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window.scrollY,t=window.scrollX,n=window.innerHeight;document.body.style.position="fixed",document.body.style.top="".concat(-e,"px"),document.body.style.left="".concat(-t,"px"),setTimeout((function(){return window.requestAnimationFrame((function(){var t=n-window.innerHeight;t&&e>=n&&(document.body.style.top=-(e+t)+"px")}))}),300)}})),s.scrollContainer.ontouchstart=function(e){1===e.targetTouches.length&&(s.initialClientY=e.targetTouches[0].clientY)},s.scrollContainer.ontouchmove=function(e){if(1===e.targetTouches.length){var t=e.targetTouches[0].clientY-s.initialClientY;return s.scrollContainer&&0===s.scrollContainer.scrollTop&&t>0&&n(e),s.scrollContainer.scrollHeight-s.scrollContainer.scrollTop<=s.scrollContainer.clientHeight&&t<0&&n(e),void e.stopPropagation()}},s.documentListenerAdded||(document.addEventListener("touchmove",n,{passive:!1}),s.documentListenerAdded=!0)},this.enableIosScroll=function(){if(s.scrollContainer.ontouchstart=null,s.scrollContainer.ontouchmove=null,s.documentListenerAdded&&(document.removeEventListener("touchmove",n),s.documentListenerAdded=!1),void 0!==s.previousBodyPosition){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=s.previousBodyPosition.position,document.body.style.top=s.previousBodyPosition.top,document.body.style.left=s.previousBodyPosition.left,window.scrollTo(t,e),s.previousBodyPosition=void 0}},this.tick=function(){s.easedY=+((1-s.damping)*s.easedY+s.damping*s.targetY).toFixed(2),s.scrollContainer.scrollTop=Math.round(s.easedY),s.lastY!==s.easedY?(s.lastY=s.easedY,s.velocity=parseInt((s.targetY-s.easedY).toString()),s.progress=Math.round(s.easedY/(s.scrollContainer.scrollHeight-s.scrollContainer.clientHeight)*100),s.rafID=requestAnimationFrame(s.tick)):s.rafID=null};var r=this.findElementBySelector(e);if(!r)throw new Error("scrollElement does not exist");this.scrollContainer=r;var a=null!==(i=this.findElementBySelector(null==o?void 0:o.eventContainer))&&void 0!==i?i:this.scrollContainer;this.eventContainer=a===document.scrollingElement?window:a,this.scrollY=0,this.easedY=0,this.targetY=0,this.lastY=0,this.velocity=0,this.progress=0,this.lastPosition=0,this.lastDirection=null,this.isLocked=!1,this.rafID=null,this.damping=.1*(null!==(l=null==o?void 0:o.damping)&&void 0!==l?l:1),this.lastHash=window.location.hash,this.listeners=new Set,this.isDisable=!1,this.initialClientY=-1,this.documentListenerAdded=!1,this.init()}return Object.defineProperty(e.prototype,"direction",{get:function(){return this.scrollY>this.lastPosition?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.scrollY},enumerable:!1,configurable:!0}),e}(),e.default=o,i.default}();var c=i("lbRHt"),d=i("5118m");function u(e){(e.preventDefault(),"IMG"===e.target.nodeName)&&(document.querySelectorAll("img").forEach((function(){lightbox.classList.add("active");var t=document.createElement("img");for(t.src=e.target.dataset.source;lightbox.firstChild;)lightbox.removeChild(lightbox.firstChild);lightbox.append(t)})),document.addEventListener("keydown",h))}function h(e){"Escape"===e.code&&lightbox.classList.remove("active")}var v,f=1,m="",y=document.querySelector("form"),p=document.querySelector(".gallery"),g=document.querySelector(".load-more"),w=document.querySelector(".message");function b(e){return C.apply(this,arguments)}function C(){return(C=e(l)(e(s).mark((function t(n){var o;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.fetchAPI(n,f);case 3:if(o=t.sent,v=Math.ceil(o.totalHits/40),o.hits.length){t.next=11;break}return e(r).Notify.failure("Sorry, there are no images matching your search query. Please try again."),p.innerHTML="",g.classList.add("visually-hidden"),w.classList.add("visually-hidden"),t.abrupt("return");case 11:1===f?(e(r).Notify.success("Hooray! We found ".concat(o.totalHits," images.")),(0,d.insertImages)(o.hits,p),p.addEventListener("click",u),g.classList.remove("visually-hidden"),w.classList.add("visually-hidden")):(0,d.addImages)(o.hits,p),f===v&&(g.classList.add("visually-hidden"),w.classList.remove("visually-hidden")),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("Oй помилочка: ",t.t0.message),e(r).Notify.failure("Упсс щось пішло не так... Спробуйте пізніше!");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}y.addEventListener("submit",(function(t){if(t.preventDefault(),f=1,!(m=t.currentTarget.elements.searchQuery.value))return p.innerHTML="",g.classList.add("visually-hidden"),e(r).Notify.failure("Введіть будь ласка текст для пошуку!");b(m),t.currentTarget.reset()})),g.addEventListener("click",(function(){(f+=1)===v&&(g.classList.add("visually-hidden"),w.classList.remove("visually-hidden"));b(m)}));var L=document.createElement("div");L.id="lightbox",document.body.appendChild(L),L.addEventListener("click",(function(e){"IMG"===e.target.nodeName&&(lightbox.classList.remove("active"),document.removeEventListener("keydown",h))}));new(e(a))(document.scrollingElement,{damping:.8,eventContainer:window})}();
//# sourceMappingURL=01-task.3aa99ffc.js.map
