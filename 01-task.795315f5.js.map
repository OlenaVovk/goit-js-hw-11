{"mappings":"mjBAKA,IAEIA,EAFAC,EAAO,EACPC,EAAc,GAGlB,MAEMC,EAAOC,SAASC,cAAc,QAC9BC,EAAQF,SAASC,cAAc,YAC/BE,EAAUH,SAASC,cAAc,cACjCG,EAAYJ,SAASC,cAAc,YA4BzCI,eAAeC,EAAWC,GACxB,IACE,MAAMC,QAAaC,EAAAC,SAAaH,EAAKV,GAGrC,GAFAD,EAAMe,KAAKC,KAAKJ,EAAKK,UApCR,KAsCRL,EAAKM,KAAKC,OAKb,OAJAC,EAAAC,GAASC,OAAOC,QAAQ,4EACxBjB,EAAMkB,UAAY,GAClBjB,EAAQkB,UAAUC,IAAI,wBACtBlB,EAAUiB,UAAUC,IAAI,mBAIb,IAATzB,GACFmB,EAAAC,GAASC,OAAOK,QAAQ,oBAAoBf,EAAKK,qBAsCvD,SAAsBL,GACpBN,EAAMkB,UAAYI,EAAWhB,E,CAtCzBiB,CAAajB,EAAKM,MAClBZ,EAAMwB,iBAAiB,QAASC,GAChCxB,EAAQkB,UAAUO,OAAO,mBACzBxB,EAAUiB,UAAUC,IAAI,oBA8B9B,SAAmBd,GACjBN,EAAM2B,mBAAmB,YAAaL,EAAWhB,G,CA7B7CsB,CAAUtB,EAAKM,MAGbjB,IAASD,IACbO,EAAQkB,UAAUC,IAAI,mBACtBlB,EAAUiB,UAAUO,OAAO,mB,CAI7B,MAAOG,GACLC,QAAQC,IAAK,iBAA4BF,EAAMG,SAC/ClB,EAAAC,GAASC,OAAOC,QAAQ,+C,EAI5B,SAASK,EAAWhB,GAClB,OAAOA,EAAK2B,KAAI,EAACC,aAACA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAC7E,gEACmCL,4BAAwCD,mBAA8BC,WAAuBC,uHAElEC,+EACAC,kFACGC,mFACCC,6CAEvDC,KAAK,G,CAvElB5C,EAAK2B,iBAAiB,UAGtB,SAAmBkB,GAIjB,GAHAA,EAAIC,iBACJhD,EAAO,EACPC,EAAc8C,EAAIE,cAAcC,SAASC,YAAYC,OAChDnD,EAGH,OAFAI,EAAMkB,UAAY,GAClBjB,EAAQkB,UAAUC,IAAI,mBACfN,EAAAC,GAASC,OAAOC,QAAQ,wCAEjCb,EAAUR,GACV8C,EAAIE,cAAcI,O,IAZpB/C,EAAQuB,iBAAiB,SAezB,WACE7B,GAAO,EACHA,IAASD,IACXO,EAAQkB,UAAUC,IAAI,mBACtBlB,EAAUiB,UAAUO,OAAO,oBAE7BtB,EAAUR,E,IA8DZ,MAAMqD,EAAWnD,SAASoD,cAAc,OAKxC,SAASzB,EAAuBiB,GAG9B,GAFAA,EAAIC,iBACJb,QAAQC,IAAIW,EAAIS,QACY,QAAxBT,EAAIS,OAAOC,SACb,OAEatD,SAASuD,iBAAiB,OAClCC,SAAQ,KACbL,EAAS9B,UAAUC,IAAI,UACvB,MAAMmC,EAAMzD,SAASoD,cAAc,OAEnC,IADAK,EAAIC,IAAMd,EAAIS,OAAOM,QAAQC,OACvBT,EAASU,YACbV,EAASW,YAAYX,EAASU,YAElCV,EAASY,OAAON,EAAI,IAEpBzD,SAAS0B,iBAAiB,UAAWsC,E,CAWvC,SAASA,EAAYpB,GACF,WAAbA,EAAIqB,MACNd,EAAS9B,UAAUO,OAAO,S,CAjC9BuB,EAASe,GAAK,WACdlE,SAASmE,KAAKC,YAAYjB,GAC1BA,EAASzB,iBAAiB,SAqB1B,SAAiCkB,GAC/B,GAA4B,QAAxBA,EAAIS,OAAOC,SACb,OAEFH,EAAS9B,UAAUO,OAAO,UAC1B5B,SAASqE,oBAAoB,UAAWL,E","sources":["src/js/01-task.js"],"sourcesContent":["\nimport '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport * as API from './fetchAPI'\n\nlet page = 1;\nlet searchQuery = '';\nlet max;\n\nconst PAGE_SET = 40;\n\nconst form = document.querySelector('form');\nconst divEl = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\nconst messageEl = document.querySelector('.message');\n\nform.addEventListener('submit', onSubmit);\nloadBtn.addEventListener('click', onClick);\n\nfunction onSubmit (evt) {\n  evt.preventDefault();\n  page = 1;\n  searchQuery = evt.currentTarget.elements.searchQuery.value\n  if (!searchQuery) {\n    divEl.innerHTML = '';\n    loadBtn.classList.add('visually-hidden');\n    return Notiflix.Notify.failure('Введіть будь ласка текст для пошуку!');   \n  }\n  fetchData(searchQuery);\n  evt.currentTarget.reset();\n}\n\nfunction onClick () {\n  page +=1; \n  if (page === max) {\n    loadBtn.classList.add('visually-hidden');\n    messageEl.classList.remove('visually-hidden');\n  }\n  fetchData(searchQuery);\n}\n\n\nasync function fetchData (res) {\n  try {\n    const data = await API.fetchAPI(res, page);\n    max = Math.ceil(data.totalHits/PAGE_SET);\n    \n    if (!data.hits.length) {\n      Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n      divEl.innerHTML = '';\n      loadBtn.classList.add('visually-hidden');\n      messageEl.classList.add('visually-hidden');\n      return;\n    }\n    \n    if (page === 1) {\n      Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`); \n      insertImages(data.hits);\n      divEl.addEventListener('click', clickOpenModalHendler);\n      loadBtn.classList.remove('visually-hidden');\n      messageEl.classList.add('visually-hidden');\n    } else {\n      addImages(data.hits);\n    }\n\n    if (page === max) {\n    loadBtn.classList.add('visually-hidden');\n    messageEl.classList.remove('visually-hidden');\n    }\n  } \n  \n  catch (error) {\n    console.log ('Oй помилочка: ', error.message);\n    Notiflix.Notify.failure('Упсс щось пішло не так... Спробуйте пізніше!');\n  }\n}\n\nfunction makeMarkup(data) {\n  return data.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n  `<div class=\"photo-card\">\n    <a class=\"gallery__item\" href=\"${largeImageURL}\"><img class=\"img\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n        <div class=\"info\">\n          <p class=\"info-item\"><span><b>Likes</b></span><span>${likes}</span></p>\n          <p class=\"info-item\"><span><b>Views</b></span><span>${views}</span></p>\n          <p class=\"info-item\"><span><b>Comments</b></span><span>${comments}</span></p>\n          <p class=\"info-item\"><span><b>Downloads</b></span><span>${downloads}</span></p>\n        </div>\n    </div>`).join('');   \n}\n\nfunction addImages(data) {\n  divEl.insertAdjacentHTML('beforeend', makeMarkup(data));\n}\n\nfunction insertImages(data) {\n  divEl.innerHTML = makeMarkup(data);\n}\n\n\n\nconst lightbox = document.createElement('div');\nlightbox.id = 'lightbox';\ndocument.body.appendChild(lightbox);\nlightbox.addEventListener('click', clickCloseModalHendler);\n\nfunction clickOpenModalHendler (evt){\n  evt.preventDefault();\n  console.log(evt.target);\n  if (evt.target.nodeName !== \"IMG\"){\n    return;\n  }\n  const images = document.querySelectorAll('img');\n  images.forEach(() => {\n    lightbox.classList.add('active');\n    const img = document.createElement('img');\n    img.src = evt.target.dataset.source;\n    while(lightbox.firstChild){\n      lightbox.removeChild(lightbox.firstChild);\n    }\n  lightbox.append(img);\n  })\n  document.addEventListener('keydown', onEscPress);   \n};\n\nfunction clickCloseModalHendler (evt) {\n  if (evt.target.nodeName !== \"IMG\"){\n    return\n  }\n  lightbox.classList.remove('active'); \n  document.removeEventListener('keydown', onEscPress);\n};\n\nfunction onEscPress (evt) {\n  if (evt.code === 'Escape'){\n    lightbox.classList.remove('active');  \n  };  \n}\n\n\n\n"],"names":["$119813252beeca8d$var$max","$119813252beeca8d$var$page","$119813252beeca8d$var$searchQuery","$119813252beeca8d$var$form","document","querySelector","$119813252beeca8d$var$divEl","$119813252beeca8d$var$loadBtn","$119813252beeca8d$var$messageEl","async","$119813252beeca8d$var$fetchData","res","data","$cqGDw","fetchAPI","Math","ceil","totalHits","hits","length","$parcel$interopDefault","$eWCmQ","Notify","failure","innerHTML","classList","add","success","$119813252beeca8d$var$makeMarkup","$119813252beeca8d$var$insertImages","addEventListener","$119813252beeca8d$var$clickOpenModalHendler","remove","insertAdjacentHTML","$119813252beeca8d$var$addImages","error","console","log","message","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","evt","preventDefault","currentTarget","elements","searchQuery","value","reset","$119813252beeca8d$var$lightbox","createElement","target","nodeName","querySelectorAll","forEach","img","src","dataset","source","firstChild","removeChild","append","$119813252beeca8d$var$onEscPress","code","id","body","appendChild","removeEventListener"],"version":3,"file":"01-task.795315f5.js.map"}