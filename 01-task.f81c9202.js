function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return o[e]=i,t.call(i.exports,i,i.exports),i.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},t.parcelRequired7c6=i);var l,s,r,a,c,d=i("eWCmQ"),u={};l=c={},s="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),r=function(e){e.touches.length>1||e.preventDefault&&e.preventDefault()},a=function(){function e(e,t){var o,n,i=this;this.classNames={container:"only-scroll-container",lock:"only-scroll--is-locked"},this.updateDirection=function(){i.lastPosition=i.scrollY,i.scrollY=Math.abs(i.scrollContainer.scrollTop),i.direction!==i.lastDirection&&(i.scrollContainer.dataset.scrollDirection=1===i.direction?"down":"up",i.lastDirection=i.direction)},this.sync=function(){i.syncPos(),i.rafID=null},this.scrollTo=function(e){i.targetY=e,i.tick()},this.setValue=function(e){i.scrollContainer.scrollTop=e,i.sync()},this.lock=function(){i.isLocked||(s?i.disableIosScroll():i.scrollContainer.style.overflow="hidden",i.scrollContainer.classList.add(i.classNames.lock),i.eventContainer.removeEventListener("wheel",i.onWheel),i.isLocked=!0,i.sync())},this.unlock=function(){i.isLocked&&(s?i.enableIosScroll():i.scrollContainer.style.overflow="auto",i.scrollContainer.classList.remove(i.classNames.lock),i.eventContainer.addEventListener("wheel",i.onWheel,{passive:!1}),i.isLocked=!1,i.tick())},this.addScrollListener=function(e){i.eventContainer.addEventListener("scroll",e),i.listeners.add(e)},this.removeScrollListener=function(e){i.eventContainer.removeEventListener("scroll",e),i.listeners.delete(e)},this.destroy=function(){var e;i.syncTo&&clearTimeout(i.syncTo),i.scrollContainer.style.removeProperty("overflow"),(e=i.scrollContainer.classList).remove.apply(e,Object.values(i.classNames)),i.scrollContainer.removeAttribute("data-scroll-direction"),(i.scrollContainer===document.documentElement?window:i.scrollContainer).removeEventListener("scroll",i.onScroll),i.eventContainer.removeEventListener("wheel",i.onWheel),Array.from(i.listeners.values()).forEach((function(e){return i.removeScrollListener(e)}))},this.findElementBySelector=function(e){var t;return e!==window&&e!==document.scrollingElement?"string"==typeof e?document.querySelector(e):e:null!==(t=document.scrollingElement)&&void 0!==t?t:document.body},this.init=function(){i.scrollContainer.style.overflow="auto",i.scrollContainer.style.scrollBehavior="auto",i.scrollContainer.dataset.scrollDirection="up",i.scrollContainer.classList.add(i.classNames.container),i.initEvents(),i.findInitialAnchor()},this.initEvents=function(){(i.scrollContainer===document.documentElement?window:i.scrollContainer).addEventListener("scroll",i.onScroll,{passive:!0}),i.eventContainer.addEventListener("wheel",i.onWheel,{passive:!1})},this.findInitialAnchor=function(){if(window.location.hash){var e=document.querySelector(window.location.hash);e&&requestAnimationFrame((function(){return i.setValue(e.offsetTop)}))}},this.onScroll=function(){if(!i.isLocked&&!i.isDisable){if(i.updateDirection(),window.location.hash!==i.lastHash)return i.lastHash=window.location.hash,void i.syncPos();i.checkSyncTo()}},this.onWheel=function(e){e.preventDefault(),i.isLocked||(i.manageParentScrollbars(e.target),i.isDisable||(i.targetY+=i.wheelCalculate(e).pixelY,i.targetY=Math.min(i.targetY,i.scrollContainer.scrollHeight-i.scrollContainer.clientHeight),i.targetY=Math.max(i.targetY,0),null===i.rafID&&i.tick()))},this.syncPos=function(){i.easedY=i.scrollContainer.scrollTop,i.targetY=i.scrollContainer.scrollTop,i.lastY=i.scrollContainer.scrollTop,i.scrollY=i.scrollContainer.scrollTop},this.checkSyncTo=function(){i.syncTo&&clearTimeout(i.syncTo),i.syncTo=setTimeout(i.sync,100)},this.wheelCalculate=function(e){var t=e.deltaY,o=e.deltaX;if(e.deltaMode){var n=1==e.deltaMode?40:800;o*=n,t*=n}return{spinX:o<1?-1:1,spinY:t<1?-1:1,pixelX:o,pixelY:t}},this.manageParentScrollbars=function(e){var t;(null===(t=e.closest(".".concat(i.classNames.container)))||void 0===t?void 0:t.isSameNode(i.scrollContainer))?i.isDisable&&i.enable():!i.isDisable&&i.disable()},this.disable=function(){i.isDisable=!0,i.sync()},this.enable=function(){i.isDisable=!1,i.sync()},this.disableIosScroll=function(){requestAnimationFrame((function(){if(void 0===i.previousBodyPosition){i.previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window.scrollY,t=window.scrollX,o=window.innerHeight;document.body.style.position="fixed",document.body.style.top="".concat(-e,"px"),document.body.style.left="".concat(-t,"px"),setTimeout((function(){return window.requestAnimationFrame((function(){var t=o-window.innerHeight;t&&e>=o&&(document.body.style.top=-(e+t)+"px")}))}),300)}})),i.scrollContainer.ontouchstart=function(e){1===e.targetTouches.length&&(i.initialClientY=e.targetTouches[0].clientY)},i.scrollContainer.ontouchmove=function(e){if(1===e.targetTouches.length){var t=e.targetTouches[0].clientY-i.initialClientY;return i.scrollContainer&&0===i.scrollContainer.scrollTop&&t>0&&r(e),i.scrollContainer.scrollHeight-i.scrollContainer.scrollTop<=i.scrollContainer.clientHeight&&t<0&&r(e),void e.stopPropagation()}},i.documentListenerAdded||(document.addEventListener("touchmove",r,{passive:!1}),i.documentListenerAdded=!0)},this.enableIosScroll=function(){if(i.scrollContainer.ontouchstart=null,i.scrollContainer.ontouchmove=null,i.documentListenerAdded&&(document.removeEventListener("touchmove",r),i.documentListenerAdded=!1),void 0!==i.previousBodyPosition){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=i.previousBodyPosition.position,document.body.style.top=i.previousBodyPosition.top,document.body.style.left=i.previousBodyPosition.left,window.scrollTo(t,e),i.previousBodyPosition=void 0}},this.tick=function(){i.easedY=+((1-i.damping)*i.easedY+i.damping*i.targetY).toFixed(2),i.scrollContainer.scrollTop=Math.round(i.easedY),i.lastY!==i.easedY?(i.lastY=i.easedY,i.velocity=parseInt((i.targetY-i.easedY).toString()),i.progress=Math.round(i.easedY/(i.scrollContainer.scrollHeight-i.scrollContainer.clientHeight)*100),i.rafID=requestAnimationFrame(i.tick)):i.rafID=null};var l=this.findElementBySelector(e);if(!l)throw new Error("scrollElement does not exist");this.scrollContainer=l;var a=null!==(o=this.findElementBySelector(null==t?void 0:t.eventContainer))&&void 0!==o?o:this.scrollContainer;this.eventContainer=a===document.scrollingElement?window:a,this.scrollY=0,this.easedY=0,this.targetY=0,this.lastY=0,this.velocity=0,this.progress=0,this.lastPosition=0,this.lastDirection=null,this.isLocked=!1,this.rafID=null,this.damping=.1*(null!==(n=null==t?void 0:t.damping)&&void 0!==n?n:1),this.lastHash=window.location.hash,this.listeners=new Set,this.isDisable=!1,this.initialClientY=-1,this.documentListenerAdded=!1,this.init()}return Object.defineProperty(e.prototype,"direction",{get:function(){return this.scrollY>this.lastPosition?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.scrollY},enumerable:!1,configurable:!0}),e}(),l.default=a,u=c.default;var h=i("cqGDw"),f=i("cky31");function m(e){if(e.preventDefault(),"IMG"!==e.target.nodeName)return;document.querySelectorAll("img").forEach((()=>{lightbox.classList.add("active");const t=document.createElement("img");for(t.src=e.target.dataset.source;lightbox.firstChild;)lightbox.removeChild(lightbox.firstChild);lightbox.append(t)})),document.addEventListener("keydown",v)}function v(e){"Escape"===e.code&&lightbox.classList.remove("active")}let y,p=1,g="";const w=document.querySelector("form"),C=document.querySelector(".gallery"),b=document.querySelector(".load-more"),L=document.querySelector(".message");async function Y(t){try{const o=await h.fetchAPI(t,p);if(y=Math.ceil(o.totalHits/40),!o.hits.length)return e(d).Notify.failure("Sorry, there are no images matching your search query. Please try again."),C.innerHTML="",b.classList.add("visually-hidden"),void L.classList.add("visually-hidden");1===p?(e(d).Notify.success(`Hooray! We found ${o.totalHits} images.`),(0,f.insertImages)(o.hits,C),C.addEventListener("click",m),b.classList.remove("visually-hidden"),L.classList.add("visually-hidden")):(0,f.addImages)(o.hits,C),p===y&&(b.classList.add("visually-hidden"),L.classList.remove("visually-hidden"))}catch(t){console.log("Oй помилочка: ",t.message),e(d).Notify.failure("Упсс щось пішло не так... Спробуйте пізніше!")}}w.addEventListener("submit",(function(t){if(t.preventDefault(),p=1,g=t.currentTarget.elements.searchQuery.value,!g)return C.innerHTML="",b.classList.add("visually-hidden"),e(d).Notify.failure("Введіть будь ласка текст для пошуку!");Y(g),t.currentTarget.reset()})),b.addEventListener("click",(function(){p+=1,p===y&&(b.classList.add("visually-hidden"),L.classList.remove("visually-hidden"));Y(g)}));const E=document.createElement("div");E.id="lightbox",document.body.appendChild(E),E.addEventListener("click",(function(e){"IMG"===e.target.nodeName&&(lightbox.classList.remove("active"),document.removeEventListener("keydown",v))}));new(e(u))(document.scrollingElement,{damping:.8,eventContainer:window});
//# sourceMappingURL=01-task.f81c9202.js.map
