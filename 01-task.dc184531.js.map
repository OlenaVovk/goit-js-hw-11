{"mappings":"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","sources":["src/js/01-task.js"],"sourcesContent":["\nimport '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport * as API from './fetchAPI'\n\nlet page = 1;\nlet searchQuery = '';\nlet max;\n\nconst PAGE_SET = 40;\n\nconst form = document.querySelector('form');\nconst divEl = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\nconst messageEl = document.querySelector('.message');\n\nform.addEventListener('submit', onSubmit);\nloadBtn.addEventListener('click', onClick);\n\nfunction onSubmit (evt) {\n  evt.preventDefault();\n  page = 1;\n  searchQuery = evt.currentTarget.elements.searchQuery.value\n  if (!searchQuery) {\n    divEl.innerHTML = '';\n    loadBtn.classList.add('visually-hidden');\n    return Notiflix.Notify.failure('Введіть будь ласка текст для пошуку!');   \n  }\n  fetchData(searchQuery);\n  evt.currentTarget.reset();\n}\n\nfunction onClick () {\n  page +=1; \n  if (page === max) {\n    loadBtn.classList.add('visually-hidden');\n    messageEl.classList.remove('visually-hidden');\n  }\n  fetchData(searchQuery);\n}\n\n\nasync function fetchData (res) {\n  try {\n    const data = await API.fetchAPI(res, page);\n    max = Math.ceil(data.totalHits/PAGE_SET);\n    \n    if (!data.hits.length) {\n      Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n      divEl.innerHTML = '';\n      loadBtn.classList.add('visually-hidden');\n      messageEl.classList.add('visually-hidden');\n      return;\n    }\n    \n    if (page === 1) {\n      Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`); \n      insertImages(data.hits);\n      divEl.addEventListener('click', clickOpenModalHendler);\n      loadBtn.classList.remove('visually-hidden');\n      messageEl.classList.add('visually-hidden');\n    } else {\n      addImages(data.hits);\n    }\n\n    if (page === max) {\n    loadBtn.classList.add('visually-hidden');\n    messageEl.classList.remove('visually-hidden');\n    }\n  } \n  \n  catch (error) {\n    console.log ('Oй помилочка: ', error.message);\n    Notiflix.Notify.failure('Упсс щось пішло не так... Спробуйте пізніше!');\n  }\n}\n\nfunction makeMarkup(data) {\n  return data.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n  `<div class=\"photo-card\">\n    <a class=\"gallery__item\" href=\"${largeImageURL}\"><img class=\"img\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n        <div class=\"info\">\n          <p class=\"info-item\"><span><b>Likes</b></span><span>${likes}</span></p>\n          <p class=\"info-item\"><span><b>Views</b></span><span>${views}</span></p>\n          <p class=\"info-item\"><span><b>Comments</b></span><span>${comments}</span></p>\n          <p class=\"info-item\"><span><b>Downloads</b></span><span>${downloads}</span></p>\n        </div>\n    </div>`).join('');   \n}\n\nfunction addImages(data) {\n  divEl.insertAdjacentHTML('beforeend', makeMarkup(data));\n}\n\nfunction insertImages(data) {\n  divEl.innerHTML = makeMarkup(data);\n}\n\n\n\nconst lightbox = document.createElement('div');\nlightbox.id = 'lightbox';\ndocument.body.appendChild(lightbox);\nlightbox.addEventListener('click', clickCloseModalHendler);\n\nfunction clickOpenModalHendler (evt){\n  evt.preventDefault();\n  console.log(evt.target);\n  if (evt.target.nodeName !== \"IMG\"){\n    return;\n  }\n  const images = document.querySelectorAll('img');\n  images.forEach(() => {\n    lightbox.classList.add('active');\n    const img = document.createElement('img');\n    img.src = evt.target.dataset.source;\n    while(lightbox.firstChild){\n      lightbox.removeChild(lightbox.firstChild);\n    }\n  lightbox.append(img);\n  })\n  document.addEventListener('keydown', onEscPress);   \n};\n\nfunction clickCloseModalHendler (evt) {\n  if (evt.target.nodeName !== \"IMG\"){\n    return\n  }\n  lightbox.classList.remove('active'); \n  document.removeEventListener('keydown', onEscPress);\n};\n\nfunction onEscPress (evt) {\n  if (evt.code === 'Escape'){\n    lightbox.classList.remove('active');  \n  };  \n}\n\n\n\n"],"names":["$081753161ccb83ef$var$max","$bpxeT","parcelRequire","$081753161ccb83ef$var$page","$081753161ccb83ef$var$searchQuery","$081753161ccb83ef$var$form","document","querySelector","$081753161ccb83ef$var$divEl","$081753161ccb83ef$var$loadBtn","$081753161ccb83ef$var$messageEl","$081753161ccb83ef$var$fetchData","res","$081753161ccb83ef$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","data","$lbRHt","fetchAPI","_ctx","sent","Math","ceil","totalHits","hits","length","$iU1Pc","Notify","failure","innerHTML","classList","add","success","concat","$081753161ccb83ef$var$insertImages","addEventListener","$081753161ccb83ef$var$clickOpenModalHendler","remove","$081753161ccb83ef$var$addImages","console","log","t0","message","$081753161ccb83ef$var$makeMarkup","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","evt","preventDefault","currentTarget","elements","searchQuery","value","reset","$081753161ccb83ef$var$lightbox","createElement","target","nodeName","querySelectorAll","forEach","img","src","dataset","source","firstChild","removeChild","append","$081753161ccb83ef$var$onEscPress","code","id","body","appendChild","removeEventListener"],"version":3,"file":"01-task.dc184531.js.map"}